{% extends 'posts/layout.html' %}

{% block content %}
    <div class="row">
        <div class="col s12 m9">
            <h2 class="center-align">{{ title }}</h2>
            {% for post in posts %}
                <article class="card-panel hoverable center-align">
                    <div class="card-content">
                        <h3 class="card-title">
                            <a href="/posts/{{ post.slug }}" title="{{ post.title|escape }}">
                                {{ post.title }}
                            </a>
                        </h3>
                        <p>{{ post.body|truncatewords:10 }}</p>
                    </div>
                    <div class="card-action">
                        <a class="link" href="/posts/{{ post.slug }}" title="Read more">read more</a>
                    </div>
                </article>
            {% endfor %}

            <ul class="pagination center-align">
                <li class="waves-effect{% if not posts.has_previous %} disabled{% endif %}">
                    <a href="?page=1"><i class="material-icons">first_page</i></a>
                </li>
                <li class="waves-effect{% if not posts.has_previous %} disabled{% endif %}">
                    <a href="?page={% if posts.has_previous %}{{ posts.previous_page_number }}{% endif %}"><i class="material-icons">chevron_left</i></a>
                </li>
                {% for page in posts.paginator.page_range %}
                    <li class="waves-effect{% if page == posts.number %} active teal{% endif %}"><a href="?page={{ page }}">{{ page }}</a></li>
                {% endfor %}
                <li class="waves-effect{% if not posts.has_next %} disabled{% endif %}">
                    <a href="?page={% if posts.has_next %}{{ posts.next_page_number }}{% endif %}"><i class="material-icons">chevron_right</i></a>
                </li>
                <li class="waves-effect{% if not posts.has_next %} disabled{% endif %}">
                    <a href="?page={% if posts.has_next %}{{ posts.paginator.num_pages }}{% endif %}"><i class="material-icons">last_page</i></a>
                </li>
            </ul>
        </div>
        <div class="col s12 m3">
            <h5>Categories</h5>
            <ul class="collection">
                <li class="collection-item">
                    <a href="/posts/" title="All">
                        All
                    </a>
                </li>
                {% for category in categories %}
                    <li class="collection-item">
                        <a href="/posts/category/{{ category.slug }}" title="{{ category.name|escape }}">
                            {{ category.name }}
                        </a>
                    </li>
                {% endfor %}
                <li class="collection-item">
                    <a href="/posts/category/none" title="Without category">
                        None
                    </a>
                </li>
            </ul>
        </div>
    </div>
{% endblock %}
